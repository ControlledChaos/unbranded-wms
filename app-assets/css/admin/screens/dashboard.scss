// Import general app variables.
@import '../../includes/modules/_typography';
@import '../../includes/modules/_colors';
@import '../modules/_common';

// Dashboard tabs.
.tab-section-wrap__dashboard {
	display: flex;

	.tab-section-dashboard {
		min-width: 240px;
		max-width: 640px;

		&:not( :last-of-type ) {
			margin-right: 2rem;
		}

		& + div {
			margin-top: 2rem;
		}
	}

	.tab-section__dashboard-content,
	.tab-section__dashboard-accounts {

		ul {
			li:not( :last-of-type ) {
				margin-top: 0.35em;
			}
		}
	}
}

.dashboard-panel-call-to-action {
	a + a {
		// Force line break without <br> element.
		display: table;
		margin-top: 0.5em;
	}
}

// Dashboard widgets.
#dashboard-widgets-wrap {
	overflow: hidden;
	margin-top: 2rem;

	.columns-3 #postbox-container-4 .empty-container {
		border: none !important;
	}

	#dashboard-widgets .postbox form .submit #publish {
		min-width: 0;
	}
}

.postbox .button-link .edit-box {
	display: none;
}

.edit-box {
	opacity: 0;
}

.hndle:hover .edit-box,
.edit-box:focus {
	opacity: 1;
}

#dashboard-widgets {
	display: grid;
	grid-template-columns: repeat(4, 1fr);
	grid-gap: 0.35em 0.35em;
	width: 100%;
	height: 100%;

	@media screen and ( max-width: 1280px ) {
		grid-template-columns: repeat( 3, 1fr );
	}

	@media screen and ( max-width: 960px ) {
		grid-template-columns: repeat( 2, 1fr );
	}

	@media screen and ( max-width: 640px ) {
		grid-template-columns: repeat( 1, 1fr );
	}

	&.columns-3 {
		grid-template-columns: repeat( 3, 1fr );

		@media screen and ( max-width: 960px ) {
			grid-template-columns: repeat( 2, 1fr );
		}

		@media screen and ( max-width: 640px ) {
			grid-template-columns: repeat( 1, 1fr );
		}
	}

	&.columns-2 {
		grid-template-columns: repeat( 2, 1fr );

		@media screen and ( max-width: 640px ) {
			grid-template-columns: repeat( 1, 1fr );
		}
	}

	&.columns-1 {
		grid-template-columns: repeat( 1, 1fr );
	}

	.postbox-container {

		.postbox {
			position: relative;
			padding-bottom: 1em;
			border: $box_border_style $box_border_width $box_border_color;

			&.closed {
				padding-bottom: 0;
				border-bottom: 0;
			}

			.inside {
				margin-bottom: 0;

				ul {
					margin-top: 1em;
				}
			}

			form {
				.submit {
					float: none;
					margin: .5em 0 0;
					padding: 0;
					border: none;
				}
			}
		}
	}

	.meta-box-sortables {
		min-height: 100px;
	}

	form {

		.input-text-wrap input {
			width: 100%;
		}

		.textarea-wrap textarea {
			width: 100%;
		}
	}

	a,
	.button-link {
		text-decoration: none;
	}

	h2 a {
		text-decoration: underline;
	}

	.hndle .postbox-title-action {
		float: right;
		line-height: 1.2;
	}
}

#tab-panel-draftposts {

	.app-tab-content-inner {
		display: flex;
		position: relative;

		@media screen and (max-width: 782px) {
			flex-direction: column;
		}
	}

	.app-tab-content-section {
		min-width: 160px;
		max-width: 480px;

		@media screen and (max-width: 782px) {
			max-width: 100%;
		}

		&:first-of-type {
			min-width: 320px;
		}

		&:not( :last-of-type ) {
			margin-right: 2rem;
		}
	}
}

.app-tabs {

	.app-tab-content {

		header {
			margin-bottom: 1em;
			padding-bottom: 1em;
			border-bottom: $box_border_style $box_border_width $box_border_color;
		}

		.dashboard-overview-item {
			margin: 0;
			margin-top: 0.35em;
		}
	}
}

.tab-icon-content {
	display: flex;
	padding-right: 2rem;

	@media screen and ( max-width: 799px ) {
		display: block;
	}

	figure {
		min-width: 80px;
		margin-right: 1em;

		@media screen and ( max-width: 799px ) {
			float: left;
		}

		a,
		img {
			display: block;
		}
	}

	h4 {
		font-size: 1.25em;
	}
}

#dashboard_right_now {

	li a:before,
	li span:before {
		color: $light_gray;
		font: normal 20px/1 dashicons;
		display: inline-block;
		padding: 0 10px 0 0;
		position: relative;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		text-decoration: none !important;
		vertical-align: top;
	}

	li a:before,

	// Get only the first level span to exclude screen-reader-text in mu-storage.
	li > span:before {

		// Generic icon for items added by custom post types.
		content: '\f159';
		padding: 0 0.25em 0 0;
	}

	.post-count {
		a:before,
		span:before {
			content: '\f109';
		}
	}

	.page-count {
		a:before,
		span:before {
			content: '\f105';
		}
	}

	.comment-count a:before {
		content: '\f101';
	}

	.comment-mod-count a:before {
		content: '\f125';
	}

	.storage-count a:before {
		content: '\f104';
	}

	.storage-count.warning a:before {
		content: '\f153';
	}

	ul {
		margin: 0;

		// Contain floats but don't use overflow: hidden.
		display: inline-block;
		width: 100%;

		li {
			width: 50%;
			float: left;
			margin-top: 1em;
		}
	}

	.inside {
		padding: 0;
	}

	.main {
		padding: 0 1em 1em;

		h3 {
			font-weight: 700;

			&:not(:first-of-type) {
				padding-top: 1em;
				border-top: $box_border_style $box_border_width $box_border_color;
			}
		}

		p {
			margin: 0.25em 0 0;

			&:first-of-type {
				margin-top: 1em;
			}
		}
	}

	#wp-version-message .button {
		float: right;
		position: relative;
		top: -5px;
		margin-left: 5px;
	}

	.sub {
		color: $medium_gray;
		border-top: $box_border_style $box_border_width $box_border_color;
		padding: 1em;

		h3 {
			color: $medium_gray;
		}

		p {
			margin: 0 0 1em;
		}
	}

	.warning {
		a:before,
		span:before {
			color: $app_red;
		}
	}
}

.mu-storage {
	overflow: hidden;
}

// Quick draft.
#dashboard_quick_draft {

	.inside {
		margin: 0;
		padding: 1em;
	}

	div.updated {
		margin-bottom: 10px;
		border: $box_border_style $box_border_width $box_border_color;
		border-width: 1px 1px 1px 0;
	}

	form {
		margin-top: 1em;
	}

	p.description {
		margin: 0;
	}

	.drafts {
		margin-top: 1em;
		padding: 10px 0 0;
	}

	input,
	textarea {
		box-sizing: border-box;
		margin: 0;
	}

	textarea {
		resize: vertical;
	}

	.drafts {

		h2 {
			line-height: inherit;
		}

		abbr {
			border: none;
		}

		.view-all {
			float: right;
			margin: 0 1em 0 0;
		}

		ul {
			margin: 1em 0 0;
		}

		li {
			margin-bottom: 1em;
		}

		p {
			margin: 0;
			word-wrap: break-word;
		}

		a {
			font-weight: 700;

			@supports( font-variation-settings: normal ) {
				font-weight: 600;
			}
		}
	}

	.draft-title {
		word-wrap: break-word;

		a,
		time {
			margin: 0 0.5em 0 0;
		}
	}
}

#quick-draft {

	input[type="text"],
	textarea {
		width: 100%;
		max-width: 640px;
	}

	.dashboard-quick-draft-error {
		margin: 1em 0;
	}

	textarea#content {
		height: 120px;
		min-height: 120px;
		max-height: 1300px;
	}

	#title-wrap {

		label {
			cursor: text;
		}

		#title {
			padding: 0 0.5em;
			font-size: 1.3em;
			outline: none;
		}

		#title-prompt-text {
			font-size: 1.1em;
			padding: 0.5em;
		}
	}

	#description-wrap label {
		cursor: text;
	}

	#description-wrap {
		margin-top: 1em;
	}

	#title-wrap #title-prompt-text,
	.textarea-wrap #content-prompt-text {
		color: $light_gray;
	}

	#title-wrap #title-prompt-text {
		font-size: 1.1em;
		padding: 0.5em;
	}

	.input-text-wrap,
	.textarea-wrap {
		position: relative;
	}

	.input-text-wrap .prompt,
	.textarea-wrap .prompt {
		position: absolute;
	}

	.textarea-wrap #content-prompt-text {
		font-size: 1.1em;
		padding: 0.5em;
	}
}

.no-js #quick-draft textarea#content {
	height: auto;
}

.js #dashboard_quick_draft .drafts {
	border-top: $box_border_style $box_border_width $box_border_color;
}

#dashboard_primary a.rsswidget {
	font-weight: 400;
}

// Activity widget.
#activity-widget {

	.inside {
		margin: 0;
		padding-bottom: 0;
	}

	.no-activity {
		overflow: hidden;
		padding: 0 0 1em;
		text-align: center;

		p {
			color: $light_gray;
			font-size: 16px;
		}

		.smiley {
			margin-top: 0;

			&:before {
				content: '\f328';
				font: normal 120px/1 dashicons;
				display: block;
				margin: 0 5px 0 0;
				padding: 0;
				text-indent: 0;
				text-align: center;
				position: relative;
				-webkit-font-smoothing: antialiased;
				text-decoration: none !important;
			}
		}
	}

	.subsubsub {
		float: none;
		border-top: 1px solid #eee;
		margin: 0 -1em;
		padding: 8px 1em 4px;

		a {
			.count,
			&.current .count {
				color: $light_gray;
			}
		}
	}

	#latest-comments {

		.subsubsub {
			font-size: $px13;
		}

		#the-comment-list {
			position: relative;
			margin: 0 -1em;

			.comment-item {

				/// The row-actions paragraph is output only for users with
				/// 'edit_comment' capabilities, for other users this needs
				/// a min height equal to the gravatar image.
				min-height: 50px;
				margin: 0;
				padding: 1em;
			}

			tr.undo,
			div.undo {
				background: none;
				padding: 0.5em 0;
				margin-left: 1em;
			}

			.comment-item {
				padding: 1em;
				position: relative;

				&:first-child {
					border-top: $box_border_style $box_border_width $box_border_color;
				}

				p.row-actions {
					margin: 0.25em 0 0 0;
				}
			}

			.avatar {
				position: absolute;
				top: 1em;
			}

			.dashboard-comment-wrap {
				padding-left: 4rem;

				blockquote {
					margin: 1em 0;
				}
			}

			.unapproved {

				&:before {
					content: '';
					display: block;
					position: absolute;
					left: 0;
					top: 0;
					bottom: 0;
					background: $app_red;
					width: 4px;
				}
			}

			.spam-undo-inside .avatar,
			.trash-undo-inside .avatar {
				position: relative;
				top: 0;
			}

			.comment-item {

				&:first-child {
					border-top: none;
				}

				blockquote,
				blockquote p {
					margin: 0;
					padding: 0;
					display: inline;
				}

				p.row-actions {
					margin: 0.25em 0 0;
					padding: 0;
					font-size: $px13;
				}
			}

			.comment-meta {
				line-height: 1.5em;
				margin: 0;
				color: $medium_gray;

				cite {
					font-style: normal;
					font-weight: 400;
				}
			}
		}
	}

	.dashboard-comment-wrap {
		word-wrap: break-word;
	}

	.comment-meta span.approve:before {
		content: '\f227';
		font: 20px/.5 dashicons;
		margin-left: 5px;
		vertical-align: middle;
		position: relative;
		top: -1px;
		margin-right: 2px;
	}

	.activity-block {
		border-bottom: $box_border_style $box_border_width $box_border_color;

		&:last-child {
			border-bottom: none;
		}

		.subsubsub li {
			color: $light_gray;
		}
	}

	#future-posts ul,
	#published-posts ul {
		clear: both;
		margin-bottom: 0;

		span {
			display: inline-block;
			margin-right: 5px;
		}
	}

	#future-posts a,
	#published-posts a {
		font-weight: 700;

		@supports( font-variation-settings: normal ) {
			font-weight: 600;
		}
	}
}

#dashboard_plugins h5 {
	font-size: $px14;
}

// Feeds.
.rss-widget {

	ul {
		margin: 0;
		padding: 0;
		list-style: none;

		li {
			line-height: 1.5em;
			margin-bottom: 1em;
		}
	}

	span.rss-date {
		color: $light_gray;
		font-size: $px13;
		margin-left: 3px;
	}

	cite {
		display: block;
		text-align: right;
		margin: 0 0 1em;
		padding: 0;

		&:before {
			content: '\2014';
		}
	}
}

a.rsswidget {
	font-size: $px13;
	font-weight: 600;
	line-height: 1.4em;
}


///
/// Media queries
///
@media screen and ( max-width: 782px ) {

	#dashboard_recent_comments #the-comment-list .comment-item .avatar {
		height: 30px;
		width: 30px;
		margin:0.25em 0.5em 0.25em 0;
	}
}
