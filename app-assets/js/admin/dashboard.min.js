var ajaxWidgets,ajaxPopulateWidgets,quickPressLoad;window.wp=window.wp||{},jQuery(document).ready(function(e){function t(){if(!(document.documentMode&&document.documentMode<9)){e("body").append('<div class="quick-draft-textarea-clone" style="display: none;"></div>');var t=e(".quick-draft-textarea-clone"),i=e("#content"),s=i.height(),n=e(window).height()-100;t.css({"font-family":i.css("font-family"),"font-size":i.css("font-size"),"line-height":i.css("line-height"),"padding-bottom":i.css("paddingBottom"),"padding-left":i.css("paddingLeft"),"padding-right":i.css("paddingRight"),"padding-top":i.css("paddingTop"),"white-space":"pre-wrap","word-wrap":"break-word",display:"none"}),i.on("focus input propertychange",function(){var a=e(this),o=a.val()+"&nbsp;",d=t.css("width",a.css("width")).text(o).outerHeight()+2;i.css("overflow-y","auto"),d===s||d>=n&&s>=n||(s=d>n?n:d,i.css("overflow","hidden"),a.css("height",s+"px"))})}}var i,s=e("#top-panel"),n=e("#app_top_panel-hide");i=function(t){e.post(ajaxurl,{action:"update-top-panel",visible:t,toppanelnonce:e("#toppanelnonce").val()})},s.hasClass("hidden")&&n.prop("checked")&&s.removeClass("hidden"),e(".top-panel-close, .top-panel-dismiss a",s).click(function(t){t.preventDefault(),s.addClass("hidden"),i(0),e("#app_top_panel-hide").prop("checked",!1)}),n.click(function(){s.toggleClass("hidden",!this.checked),i(this.checked?1:0)}),ajaxWidgets=["dashboard_primary"],ajaxPopulateWidgets=function(t){function i(t,i){var s,n=e("#"+i+" div.inside:visible").find(".widget-loading");n.length&&(s=n.parent(),setTimeout(function(){s.load(ajaxurl+"?action=dashboard-widgets&widget="+i+"&pagenow="+pagenow,"",function(){s.hide().slideDown("normal",function(){e(this).css("display","")})})},500*t))}t?(t=t.toString(),-1!==e.inArray(t,ajaxWidgets)&&i(0,t)):e.each(ajaxWidgets,i)},ajaxPopulateWidgets(),postboxes.add_postbox_toggles(pagenow,{pbshow:ajaxPopulateWidgets}),quickPressLoad=function(){var i,s=e("#quickpost-action");e('#quick-press .submit input[type="submit"], #quick-press .submit input[type="reset"]').prop("disabled",!1),i=e("#quick-press").submit(function(t){function s(){var t=e(".drafts ul li").first();t.css("background","#fffbe5"),setTimeout(function(){t.css("background","none")},1e3)}t.preventDefault(),e("#dashboard_quick_draft #publishing-action .spinner").show(),e('#quick-press .submit input[type="submit"], #quick-press .submit input[type="reset"]').prop("disabled",!0),e.post(i.attr("action"),i.serializeArray(),function(t){e("#drafts").html(t),e("#quick-press").removeClass("initial-form"),quickPressLoad(),s(),e("#title").focus()})}),e("#publish").click(function(){s.val("post-quickpress-publish")}),e("#title, #tags-input, #content").each(function(){var t=e(this),i=e("#"+this.id+"-prompt-text");""===this.value&&i.removeClass("screen-reader-text"),i.click(function(){e(this).addClass("screen-reader-text"),t.focus()}),t.blur(function(){""===this.value&&i.removeClass("screen-reader-text")}),t.focus(function(){i.addClass("screen-reader-text")})}),e("#quick-press").on("click focusin",function(){wpActiveEditor="content"}),t()},quickPressLoad(),e(".meta-box-sortables").sortable("option","containment","#admin-page-wrap")});